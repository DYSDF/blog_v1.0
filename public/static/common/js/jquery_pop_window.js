(function(a){a.fn.window=function(b,c){if(b=="init"){var j=a("<div class='content'></div>");j.html(a(this).html());a(this).html("");a(this).append(j);if(a(this).data("title")!=null&&a(this).data("title")!=""){var k=a("<div class='title'></div>");k.text(a(this).data("title"));k.css({"line-height":"30px",padding:"0 10px","background-color":"#4c4c4c",color:"white","border-bottom":"6px solid #169fe6",cursor:"move"});var h=this;k.on("mousedown",function(o){var n=o.clientX,m=o.clientY;k.on("mousemove",function(p){a(h).css("transform",function(){return"translate("+(p.clientX-n)+"px, "+(p.clientY-m)+"px)"})}).on("mouseup",function(p){a(this).unbind("mousemove mouseup");a(h).css({top:"+="+(p.clientY-m),left:"+="+(p.clientX-n)}).css("transform","")})});k.insertBefore(j)}var f={height:"auto",width:"auto","text-align":"center"};if(c!=null){a.extend(f,c)}a(this).css(f);a(this).css({position:"absolute",top:"45%",left:"50%",border:"1px solid #909090","background-color":"white","box-shadow":"0 0 8px #ccc","text-overflow":"ellipsis","white-space":"nowrap","z-index":"1000"});var g=a(this).outerWidth(),e=a(this).outerHeight();a(this).css({"margin-left":-g/2,"margin-top":-e/2});if(a("#window_mask").length==0){var l=a("<div id='window_mask'></div>");l.css({position:"absolute",top:"0",right:"0",bottom:"0",left:"0",background:"#d0d0d0",opacity:"0.4",display:"none","z-index":"999"});a("body").append(l)}var d=a("<style>@keyframes windowShow {0% { -webkit-transform: scale(0); -moz-transform: scale(0); -ms-transform: scale(0); -o-transform: scale(0);transform: scale(0);opacity: 0;visibility: hidden}90% {-webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1);transform: scale(1.1);opacity: 0.9;}100% { -webkit-transform: scale(1); -moz-transform: scale(1); -ms-transform: scale(1); -o-transform: scale(1);transform: scale(1);opacity: 1;visibility: visible}}@keyframes windowHide {0% { -webkit-transform: scale(1); -moz-transform: scale(1); -ms-transform: scale(1); -o-transform: scale(1);transform: scale(1);opacity: 1;visibility: visible}10% {-webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1);transform: scale(1.1);opacity: 0.9;}100% { -webkit-transform: scale(0); -moz-transform: scale(0); -ms-transform: scale(0); -o-transform: scale(0);transform: scale(0);opacity: 0;visibility: hidden}}.window_show {animation: windowShow 0.4s;}.window_hide {animation: windowHide 0.2s;}</style>");a("head").append(d)}if(b=="open"){var i=this;a("#window_mask").show().on("click",function(){a(i).window("close")});a(this).css("visibility","visible").removeClass("window_hide").addClass("window_show").window("center")}if(b=="close"){a("#window_mask").hide().unbind("click");a(this).css("visibility","hidden").removeClass("window_show").addClass("window_hide")}if(b=="center"){g=a(this).outerWidth();e=a(this).outerHeight();a(this).css({top:"45%",left:"50%","margin-left":-g/2,"margin-top":-e/2})}}})(jQuery);