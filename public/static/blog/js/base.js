require(["jquery"],function(b){function a(){var d=window.location.pathname,h=window.location.href,f=b(".nav_menu li");f.each(function(i,j,k){b(j).removeClass("cur")});if(f.length>0){var g=null;var e=null;if(f.eq(0).children("a").attr("href").indexOf("http")===0){e=h}else{e=d}for(var c=e.length;c>0;c--){f.each(function(i,k,l){var j=b(k).children("a").attr("href");if(j==e.substring(0,c)){g=k}});if(g!=null){b(g).addClass("cur");return}}}}if(b(".nav_menu li").length>0){a()}else{b(document).ready(a)}});require(["DYUtils"],function(a){a.bindEvent(document.getElementById("header_nav"),"click",a.stopBubble);a.bindEvent(document,"click",function(b){if(document.getElementById("nav_menu_checkbox").checked){document.getElementById("nav_menu_checkbox").checked=false;a.stopBubble(b);return false}})});require(["DYUtils","FastScroll"],function(a,c){var b=new c(document.getElementsByClassName("body")[0]);b.onScroll=function(e){var d=document.getElementById("go_to_top");if(e>window.screen.availHeight/2){a.addClassName(d,"show")}else{a.removeClassName(d,"show")}};a.bindEvent(document,"click",function(d){d=d||window.event;if(d.target.id=="go_to_top"){b.goTop()}})});require(["DYUtils","SpiderWeb"],function(a,b){a.DOMReady(function(){var c=new b(document.getElementById("background_canvas"),{radius:2.5,color:"#4c4c4c",count:200,scale:2,maxDistance:200});c.start()},3000)});require(["DYUtils"],function(a){function b(){setTimeout(function(){a.removeClassName(a.querySelector("#container"),"init");a.setCookie("hasVisited",true,30*60,"/")},2000)}a.DOMReady(function(){var d=a.getCookie("hasVisited");var e=a.querySelector("#header_image");if(!d){var c=document.createElement("img");c.onload=function(){e.style.backgroundImage="url("+e.dataset.image+")";b()};c.onerror=b;c.src=e.dataset.image}else{e.style.backgroundImage="url("+e.dataset.image+")"}})});require(["DYUtils"],function(a){a.ajax({url:"/hitokoto?c=a",success:function(b){json=JSON.parse(b);a.querySelector("#header_logo .sub_title").innerText="『"+json.hitokoto+"』";a.querySelector("#header_logo .sub_title").title="《"+json.from+"》"}})});